(function(a){a.fn.ALightBox=function(b){function c(y){return n=y.parent().data('title'),p=a(y).parent().children(o).index(y),d(),a('#alb-overlay').fadeIn(l.effectTime),console.log('Open'),!1}function d(){return j(a(q[p])),a(q[p]).data('title')&&l.showImageTitle&&(document.title=m+' - '+a(q[p]).data('title')),a(q[p]).parent().data('title')&&l.showGalleryTitle?a('#alb-footer').html(n+': '+(p+1)+' / '+r):a('#alb-footer').html(p+' / '+r),console.log('Update'),!1}function f(){return a('#alb-overlay').fadeOut(l.effectTime),a('#alb-content').html(''),document.title!=m&&(document.title=m),console.log('Close'),!1}function g(){return p<r-1?(p++,d()):l.roundRobin&&(p=0,d()),console.log('Next'),!1}function h(){return 0<p?(p--,d()):l.roundRobin&&(p=r-1,d()),console.log('Previous'),!1}function j(y){var z=a(y)[0].localName;if('a'==z){var A=a(y).attr('href').match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/)[2];a('#alb-content').html('<iframe src="https://www.youtube.com/embed/'+A+'?badge=0&html5=1" width="1280" height="720" frameborder="0" allowfullscreen></iframe>')}else'img'==z&&a('#alb-content').html('<img src="'+a(y).attr('src')+'"/>');return console.log('Load Content'),!1}for(var k={effectTime:200,showImageTitle:!0,showGalleryTitle:!0,language:navigator.language.substr(0,2),roundRobin:!0,showYoutubeThumbnails:!1},l=a.extend({},k,b),m=document.title,n='',o='.alb_item',p=0,q=a(this).find(o),r=q.length,s={de:{prev:'Vorheriges Bild',next:'N\xE4chstes Bild',close:'Schlie\xDFen'},en:{prev:'previous image',next:'next image',close:'close'},fr:{prev:'Image pr\xE9c\xE9dente',next:'Image suivante',close:'Fermer'},es:{prev:'Imagen anterior',next:'Siguiente imagen',close:'Cerca'},it:{prev:'Immagine precedente',next:'Immagine successiva',close:'Vicino'},zh:{prev:'\u4E0A\u4E00\u5F20\u56FE\u7247',next:'\u4E0B\u4E00\u56FE\u7247',close:'\u5173'},ru:{prev:'\u041F\u0440\u0435\u0434\u044B\u0434\u0443\u0449\u0435\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435',next:'\u0421\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0435 \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435',close:'\u0417\u0430\u043A\u0440\u044B\u0442\u044C'},da:{prev:'Forrige billede',next:'N\xE6ste billede',close:'T\xE6t'},nl:{prev:'Vorig beeld',next:'Volgend beeld',close:'Dichtbij'}},t=0;t<r;t++){!0===a(q[t]).data('hidden')&&a(q[t]).css({display:'none'});var u=a(q[t])[0].localName;if('a'==u&&l.showYoutubeThumbnails){var v=a(q[t]).attr('href').match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/)[2];a(q[t]).html('<img src="https://i.ytimg.com/vi/'+v+'/maxresdefault.jpg"/>'),a('#alb-content').html('<iframe src="https://www.youtube.com/embed/'+v+'?badge=0&html5=1" width="1280" height="720" frameborder="0" allowfullscreen></iframe>')}}a('body').append('<div id="alb-overlay"><nav><span id="alb-i-prev" title="'+s[l.language].prev+'"></span><span id="alb-i-close" title="'+s[l.language].close+'"></span><span id="alb-i-next" title="'+s[l.language].next+'"></span></nav><div id="alb-content"></div><div id="alb-footer"></div></div>'),a(this).find(o).click(function(y){y.preventDefault(),c(a(this)),console.log('Click')});var w=null,x=null;document.addEventListener('touchstart',function(y){w=y.touches[0].clientX,x=y.touches[0].clientY}),document.addEventListener('touchmove',function(y){if(w&&x){var z=w-y.touches[0].clientX,A=x-y.touches[0].clientY;Math.abs(z)>Math.abs(A)?0<z?g():h():0<A&&f(),w=null,x=null}}),a('#alb-i-close').click(function(){f()}),a('#alb-i-next').click(function(){g()}),a('#alb-i-prev').click(function(){h()}),a(document).keypress(function(y){39==y.keyCode&&g(),37==y.keyCode&&h(),27==y.keyCode&&f()})}})(jQuery);
